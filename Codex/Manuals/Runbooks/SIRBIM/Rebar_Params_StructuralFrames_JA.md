# SIRBIM（現行プロジェクト）: 構造フレーム（梁）タイプパラメータと配筋の対応メモ

このプロジェクトでは、構造フレーム（梁）についても、配筋の属性（主筋本数/径、スターラップピッチ等）を **タイプパラメータ** で保持する運用が想定されています（SIRBIM 系ファミリ）。

重要:
- ファミリ作成者や言語によってパラメータ名は変わります。**他の設計者/ファミリでは同じ名前で存在しない可能性**があります。
- 実装は「パラメータ名をソースにベタ書き」ではなく、`RebarMapping.json` の **プロファイル（変換テーブル）**で吸収し、`rebar_mapping_resolve` で検証しながら運用してください。
- パラメータが不明確な場合は、実行前に **Snoop** または `get_type_parameters_bulk` / `get_element_info (rich=true)` で存在・型・単位を確認し、ユーザーへ確認します。

## 参照CSV（注釈入り）
ユーザーが CSV の J 列（note/説明）に「配筋のための説明」を追記するための参照ファイル:
- `Manuals/Runbooks/SIRBIM/structural_frame_type_parameters_with_values_SIRBIM_annotated.csv`

元データ（自動出力）:
- `Manuals/Scripts/dump_structural_frame_type_param_definitions.py`

### 注釈（note）を維持したまま再出力する
```powershell
python Manuals/Scripts/dump_structural_frame_type_param_definitions.py --port 5210 --include-values --annotation-csv Manuals/Runbooks/SIRBIM/structural_frame_type_parameters_with_values_SIRBIM_annotated.csv
```

## note列に記載された主要項目（抜粋）
以下は、CSV の note 列に記載された「配筋向け説明」のうち、パラメータ名をキーに整理したものです（SIRBIM前提）。

| paramName | 説明（note） |
|---|---|
| B | 梁幅 |
| D | 梁せい |
| 中央あばら筋ピッチ | 中央のあばら筋のピッチ |
| 中央あばら筋径 | 中央のあばら筋の径 |
| 中央あばら筋本数 | 中央のあばら筋の組み合わせ本数 |
| 中央上端1段筋細径本数 | 中央の上端1段目（上側）の主筋本数 |
| 中央上端2段筋細径本数 | 中央の上端2段目の主筋本数 |
| 中央上端3段筋細径本数 | 中央の上端2段目の主筋本数 |
| 中央下端1段筋細径本数 | 中央の下端1段目（下側）の主筋本数 |
| 中央下端2段筋細径本数 | 中央の下端2段目の主筋本数 |
| 中央下端3段筋細径本数 | 中央の下端2段目の主筋本数 |
| 中央主筋太径種別 | 中央の主筋径 |
| 始点側あばら筋ピッチ | 始端側のあばら筋のピッチ |
| 始点側あばら筋径 | 始端側のあばら筋の径 |
| 始点側あばら筋本数 | 始端側のあばら筋の組み合わせ本数 |
| 始点側上端1段筋太径本数 | 始端側の上端1段目（上側）の主筋本数 |
| 始点側上端2段筋太径本数 | 始端側の上端2段目の主筋本数 |
| 始点側上端3段筋太径本数 | 始端側の上端2段目の主筋本数 |
| 始点側下端1段筋太径本数 | 始端側の下端1段目（下側）の主筋本数 |
| 始点側下端2段筋太径本数 | 始端側の下端2段目の主筋本数 |
| 始点側下端3段筋太径本数 | 始端側の下端2段目の主筋本数 |
| 始点側主筋太径 | 始端側の主筋径 |
| 終点側あばら筋ピッチ | 終端側のあばら筋のピッチ |
| 終点側あばら筋径 | 終端側のあばら筋の径 |
| 終点側あばら筋本数 | 終端側のあばら筋の組み合わせ本数 |
| 終点側上端1段筋太径本数 | 終端側の上端1段目（上側）の主筋本数 |
| 終点側上端2段筋太径本数 | 終端側の上端2段目の主筋本数 |
| 終点側上端3段筋太径本数 | 終端側の上端2段目の主筋本数 |
| 終点側下端1段筋太径本数 | 終端側の下端1段目（下側）の主筋本数 |
| 終点側下端2段筋太径本数 | 終端側の下端2段目の主筋本数 |
| 終点側下端3段筋太径本数 | 終端側の下端2段目の主筋本数 |
| 終点側主筋太径 | 終点側の主筋径 |

## 運用上の注意（必須）
- **この表は「現行プロジェクト（SIRBIM）」の前提**です。他のファミリでは:
  - パラメータ名が無い/違う
  - 型（整数/実数/文字列）が違う
  - 単位が違う
  - type ではなく instance にある
  などが起こりえます。
- 実際に配筋で使う前に、対象ホスト（梁）を選択して次を実行し、**どの論理キーがどの値に解決されるか**を確認してください:
  - `python Manuals/Scripts/rebar_mapping_dump_selected_hosts.py --port 5210 --include-debug`
