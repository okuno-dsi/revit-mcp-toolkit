<Window x:Class="CodexGui.ChatMonitorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Revit MCP Chat Monitor"
        Height="560"
        Width="980"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Port:" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <TextBox x:Name="PortTextBox" Width="72" Margin="0,0,6,0"/>
            <Button x:Name="AutoPortButton" Content="Auto" Width="56" Margin="0,0,12,0" Click="AutoPortButton_OnClick"/>

            <TextBlock Text="Channel:" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <TextBox x:Name="ChannelTextBox" Width="260" Text="ws://Project/General" Margin="0,0,8,0"/>

            <TextBlock Text="Limit:" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <TextBox x:Name="LimitTextBox" Width="54" Text="120" Margin="0,0,8,0"/>

            <CheckBox x:Name="AutoPollCheckBox" Content="Auto poll" IsChecked="True" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <Button x:Name="RefreshButton" Content="Refresh" Width="78" Margin="0,0,8,0" Click="RefreshButton_OnClick"/>

            <TextBlock x:Name="StatusTextBlock" VerticalAlignment="Center" Foreground="Gray"/>
        </StackPanel>

        <ListBox x:Name="MessagesListBox"
                 Grid.Row="1"
                 HorizontalContentAlignment="Stretch"
                 SelectionMode="Single">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border BorderThickness="0,0,0,1" BorderBrush="#222222" Padding="6">
                        <TextBlock Text="{Binding DisplayText}" TextWrapping="Wrap"/>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button x:Name="CopySelectedButton" Content="Copy" Width="90" Margin="0,0,8,0" Click="CopySelectedButton_OnClick"/>
            <Button x:Name="CopyAllButton" Content="Copy All" Width="90" Margin="0,0,8,0" Click="CopyAllButton_OnClick"/>
            <Button x:Name="CopyToCodexButton"
                    Content="Copy→Codex"
                    Width="110"
                    Margin="0,0,8,0"
                    Click="CopyToCodexButton_OnClick"
                    ToolTip="選択中のメッセージをクリップボードへコピーし、Codex GUI の入力欄へ貼り付けます（自動実行はしません）。"/>
            <Button x:Name="CloseButton" Content="Close" Width="90" Click="CloseButton_OnClick"/>
        </StackPanel>
    </Grid>
</Window>
